extends ../layouts/default
include ../mixins/developmentplan-detail
include ../modals/form-developmentplan
include ../mixins/flags


block content
  //- embed the developmentplan form modals
  if developmentPlan
    +modalEditDevelopmentPlan('formEditDevelopmentPlanModal', developmentPlan)
    +modalDeleteDevelopmentPlan('formDeleteDevelopmentPlanModal', developmentPlan)
    if developmentPlan.approved
      +modalApproveDevelopmentPlan('formApproveDevelopmentPlanModal', developmentPlan, 'unapprove')
    else
      +modalApproveDevelopmentPlan('formApproveDevelopmentPlanModal', developmentPlan, 'approve')

  //- display the development plan
  .container
    .row: .col-sm-12
      article
        if !developmentPlan
          h2 Invalid Development Plan.
        else
          h2 Development Plan
            //-.badge= developmentPlan.status
            small
              +flag-status(developmentPlan.status)
              +flag-approved(developmentPlan.approved, developmentPlan.approvedBy)
            .pull-right
              //- buttons to trigger edit, delete, and approve modals based on permissions
              if _.contains(authorized.permissions, 'edit') || _.contains(authorized.permissions, '*')
                a(href="#", data-toggle="modal", data-target="#formEditDevelopmentPlanModal", title="Edit Plan"): span.glyphicon.glyphicon-edit
              | 
              if _.contains(authorized.permissions, 'delete') || _.contains(authorized.permissions, '*')
                a(href="#", data-toggle="modal", data-target="#formDeleteDevelopmentPlanModal", title="Delete Plan"): span.glyphicon.glyphicon-remove-circle
              | 
              if _.contains(authorized.permissions, 'approve') || _.contains(authorized.permissions, '*')
                a(href="#", data-toggle="modal", data-target="#formApproveDevelopmentPlanModal", title="Approve Plan"): span.glyphicon.glyphicon-check
          hr          
          //- developmentPlan details
          +developmentplanDetail(developmentPlan, activities, developmentMethods, hardGaps, softGaps)