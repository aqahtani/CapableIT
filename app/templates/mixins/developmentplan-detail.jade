include commons
include flags
include ../modals/form-developmentactivity

//- Development Plan in Details
mixin developmentplanDetail(developmentplan, activities, developmentMethods, hardGaps, softGaps)
  .row
    .col-sm-2: +fieldLabel("Employee")
    .col-sm-4
      if developmentplan.employee
        h4: a(href='/employee/' + developmentplan.employee.id)= developmentplan.employee.name.full
    .col-sm-2: +fieldLabel("Plan Date")
    .col-sm-4: h4= developmentplan._.createdAt.format('YYYY-MM-DD')
  .row
    .col-sm-2: +fieldLabel("Period")
    .col-sm-4: h4=developmentplan.period
  hr
  h3 Professional Goals/Motivations
  blockquote
    p.multi-line= developmentplan.goals

  hr
  .row
    .col-sm-6
      .panel.panel-default
        .panel-heading
          h4 Strengths and Talents to Use (3-5)
        .panel-body
          p.multi-line= developmentplan.strengths
  
    .col-sm-6
      .panel.panel-default
        .panel-heading
          h4 Weaknesses to Develop (3-5)
        .panel-body
          p.multi-line= developmentplan.weaknesses
  
  +modalAddDevelopmentActivity('formAddDevelopmentActivityModal')
  hr
  .row
    .col-sm-12
      h3 Development Acitivities
        //- button to trigger add modal only on 'create' permission
        if _.contains(authorized.permissions, 'edit') || _.contains(authorized.permissions, '*')
          .pull-right: a(href="#", data-toggle="modal", data-target="#formAddDevelopmentActivityModal", title="Add Activity"): span.glyphicon.glyphicon-plus-sign

      hr
      if !activities.length
        h4 No activies found.  Click on the (+) sign to add a new one.
      else
        .table-responsive
          table.table.table-condensed
            th #
            th Title
            th Method
            th Deadline
            th.text-center Completed?
            th.text-center Actions
            each activity, i in activities
              tr
                td #{i+1}
                td
                  +modalViewDevelopmentActivity('viewDevelopmentActivityModal' + activity.id, activity)
                  a(href="#", data-toggle="modal", data-target="#viewDevelopmentActivityModal" + activity.id)= activity.title 
                td= activity.method.title
                td= activity._.deadline.format('YYYY-MM-DD')
                td.text-center
                  +flag-completed(activity.completed)
                td.text-center
                  //- button to trigger edit/delete modals only on 'edit' permission
                  if _.contains(authorized.permissions, 'edit') || _.contains(authorized.permissions, '*')
                    span.text-left
                      +modalEditDevelopmentActivity('formEditDevelopmentActivityModal' + activity.id, activity)
                      +modalDeleteDevelopmentActivity('formDeleteDevelopmentActivityModal' + activity.id, activity)
                    a(href="#", data-toggle="modal", data-target="#formEditDevelopmentActivityModal" + activity.id, title="Edit Activity"): span.glyphicon.glyphicon-edit
                    |  
                    a(href="#", data-toggle="modal", data-target="#formDeleteDevelopmentActivityModal" + activity.id, title="Delete Activity"): span.glyphicon.glyphicon-remove-circle
      hr
      //- Skill Gaps
      .row
        .col-sm-6
          .panel.panel-danger
            .panel-heading Top professional skill gaps to target
            .list-group
              for hardGap, index in _.first(hardGaps, 5)
                .list-group-item
                  span.badge= hardGap.gap
                  span= hardGap.skill.title
            .panel-footer
              | More on professional skills can be found under 
              a(href='/skills/hard') Guide/Professional Skills
                    
        .col-sm-6
          .panel.panel-warning
            .panel-heading Top behavioral skill gaps to target
            .list-group
              for softGap, index in _.first(softGaps, 5)
                .list-group-item
                  span.badge= softGap.gap
                  span= softGap.skill.title
            .panel-footer 
              | More on behavioral skills can be found under 
              a(href='/skills/soft') Guide/Behavioral Skills
