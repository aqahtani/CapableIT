include form-mixins

//- Modal: Add Job Form
mixin modalAddJob(modalId, jobs)
  .modal.fade(id="#{modalId}")
    .modal-dialog.modal-lg
      form(method='post').form-horizontal.modal-content
        input(type='hidden', name='action', value='create-job')
        .modal-header
          button(type="button", data-dismiss="modal").close
            span(aria-hidden="true") &times;
            span.sr-only Close
          h4.modal-title Add Job
        .modal-body
          .row
            .col-sm-6
              .form-group(class=validationErrors.title ? 'has-error' : null)
                label(for='title').col-sm-4.control-label Title
                .col-sm-8: input(type='text', name='title', id='title', required).form-control
            .col-sm-6
              .form-group(class=validationErrors.altTitle ? 'has-error' : null)
                label(for='altTitle').col-sm-4.control-label Arabic Title
                .col-sm-8: input(type='text', name='altTitle', id='altTitle').form-control
          .row
            .col-sm-6
              .form-group(class=validationErrors.code ? 'has-error' : null)
                label(for='code').col-sm-4.control-label Job Code
                .col-sm-8: input(type='text', name='code', id='code').form-control
          .row
            .col-sm-12
              .form-group(class=validationErrors.reportsTo ? 'has-error' : null)
                label(for='reportsTo').col-sm-2.control-label Reports To
                .col-sm-10: +formSelect2ListOptional('reportsTo', jobs)

        .modal-footer
          button(type='submit').btn.btn-primary Create
          button(type="button", data-dismiss="modal").btn.btn-default Cancel


//- Modal: Edit Job Form
mixin modalEditJob(modalId, job, eduLevelOptions, engTestOptions)
  .modal.fade(id="#{modalId}")
    .modal-dialog.modal-lg
      form(method='post').form-horizontal.modal-content
        input(type='hidden', name='action', value='update-job')
        .modal-header
          button(type="button", data-dismiss="modal").close
            span(aria-hidden="true") &times;
            span.sr-only Close
          h4.modal-title Edit Job
        .modal-body
          .row
            .col-sm-6
              .form-group.form-group-sm(class=validationErrors.name ? 'has-error' : null)
                label(for='name').col-sm-4.control-label Name
                .col-sm-8: input(type='text', name='name.full', id='name', value=job.name.full).form-control
            .col-sm-6
              .form-group.form-group-sm(class=validationErrors.arName ? 'has-error' : null)
                label(for='arName').col-sm-4.control-label Arabic Name
                .col-sm-8: input(type='text', name='arName', id='arName', value=job.arName).form-control
          .row
            .col-sm-6
              .form-group.form-group-sm(class=validationErrors.empId ? 'has-error' : null)
                label(for='empId').col-sm-4.control-label Job ID
                .col-sm-8: input(type='text', name='empId', id='empId', value=job.empId).form-control
            .col-sm-6
              .form-group.form-group-sm(class=validationErrors.email ? 'has-error' : null)
                label(for='email').col-sm-4.control-label Email
                .col-sm-8: input(type='text', name='email', id='email', value=job.email).form-control
          .row
            .col-sm-6
              .form-group.form-group-sm(class=validationErrors.telephone ? 'has-error' : null)
                label(for='telephone').col-sm-4.control-label Telephone
                .col-sm-8: input(type='text', name='telephone', id='telephone', value=job.telephone).form-control
            .col-sm-6
              .form-group.form-group-sm(class=validationErrors.mobile ? 'has-error' : null)
                label(for='mobile').col-sm-4.control-label Mobile
                .col-sm-8: input(type='text', name='mobile', id='mobile', value=job.mobile).form-control
          .row
            .col-sm-6
              .form-group.form-group-sm(class=validationErrors.birthDate ? 'has-error' : null)
                label(for='birthDate').col-sm-4.control-label Birth Date
                .col-sm-8: input(type='text', name='birthDate', id='birthDate', value=job._.birthDate.format('YYYY-MM-DD')).form-control.datepicker
            .col-sm-6
              .form-group.form-group-sm(class=validationErrors.formalTitle ? 'has-error' : null)
                label(for='formalTitle').col-sm-4.control-label Formal Title
                .col-sm-8: input(type='text', name='formalTitle', id='formalTitle', value=job.formalTitle).form-control

          hr
          .row
            .col-sm-12
              .form-group.form-group-sm(class=validationErrors.bio ? 'has-error' : null)
                label(for='bio').col-sm-2.control-label About/Bio
                .col-sm-10: textarea(name='bio', id='bio', rows='3', placeholder='about you').form-control= job.bio
          hr
          .row
            .col-sm-6
              .form-group.form-group-sm(class=validationErrors['english.test'] ? 'has-error' : null)
                label(for='english.test').col-sm-4.control-label English Test
                .col-sm-8: +formSelectInput('english.test', engTestOptions, job.english.test) 
              .form-group.form-group-sm(class=validationErrors['english.score'] ? 'has-error' : null)
                label(for='english.score').col-sm-4.control-label Test Score
                .col-sm-8: input(type='text', name='english.score', id='english.score', value=job.english.score).form-control
            .col-sm-6
              .form-group.form-group-sm(class=validationErrors['education.field'] ? 'has-error' : null)
                label(for='education.field').col-sm-4.control-label Education Field
                .col-sm-8: input(type='text', name='education.field', id='education.field', value=job.education.field).form-control
              .form-group.form-group-sm(class=validationErrors['education.level'] ? 'has-error' : null)
                label(for='education.level').col-sm-4.control-label  Education Level
                .col-sm-8: +formSelectInput('education.level', eduLevelOptions, job.education.level) 
          .row
            .col-sm-12
              .form-group.form-group-sm(class=validationErrors.certificates ? 'has-error' : null)
                label(for='certificates').col-sm-2.control-label Certificates
                .col-sm-10: +formMultiText('certificates', job.certificates)
                    
        .modal-footer
          button(type='submit').btn.btn-primary Submit
          button(type="button", data-dismiss="modal").btn.btn-default Cancel

//- Modal: Delete Job Form
mixin modalDeleteJob(modalId, job)
  .modal.fade(id="#{modalId}")
    .modal-dialog
      form(method='post').modal-content
        input(type='hidden', name='action', value='delete-job')
        input(type='hidden', name='jobId', value=job.id)
        .modal-header
          button(type="button", data-dismiss="modal").close
            span(aria-hidden="true") &times;
            span.sr-only Close
          h4.modal-title Delete Job
        .modal-body
          p Are you sure you want to delete this job?

          dl.dl-horizontal
            dt Title
            dd #{job.title} | #{job.altTitle}

          .alert.alert-danger(role="alert")
            span.glyphicon.glyphicon-exclamation-sign
            |  All related <strong>assessments</strong> will be deleted as well!
          
        .modal-footer
          button(type='submit').btn.btn-danger Delete
          button(type="button", data-dismiss="modal").btn Cancel

//- Modal: Department/Function Assignment Form
mixin modalDeptAssignment(modalId, job, orgDepts, orgFuncs)
  .modal.fade(id="#{modalId}")
    .modal-dialog
      form(method='post').modal-content
        input(type='hidden', name='action', value='assign-dept')
        input(type='hidden', name='jobId', value=job.id)
        .modal-header
          button(type="button", data-dismiss="modal").close
            span(aria-hidden="true") &times;
            span.sr-only Close
          h4.modal-title Department/Function Assignment
        .modal-body
          p Which department/function you want to reassign this job to?

          dl.dl-horizontal
            dt Job
            dd #{job.title} | #{job.altTitle}
            dt Current Department
            dd= job.orgDepartment ? job.orgDepartment.title : '-'
            dt Current Function
            dd= job.orgFunction ? job.orgFunction.title : '-'
            br
            dt New Department
            dd: +formSelect2ListOptional('orgDepartment', orgDepts, job.orgDepartment)
            br
            dt New Function
            dd: +formSelect2ListOptional('orgFunction', orgFuncs, job.orgFunction)

        .modal-footer
          button(type='submit').btn.btn-danger Assign
          button(type="button", data-dismiss="modal").btn Cancel
